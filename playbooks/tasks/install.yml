---
- name: Install RKE2 Controlers
  hosts: RKE2_CONTROLERS
  gather_facts: true
  become: true
  vars_files: 
    - ../vars/main.yml
  tags: controler
  roles:
  - {role: install_rke2_controler, tags: rke2,}

# - name: Install K3S agents
#   hosts: RKE2_WORKERS
#   gather_facts: true
#   become: true
#   vars_files: ../vars/main.yml
#   tags: worker
#   roles:
#   - {role: set_nfs_mount, tags: nfs,}
#   - {role: install_utils_registry, tags: registry,}
#   - {role: install_rke2_worker, tags: rke2,}
#   - {role: install_utils_nerdctl, tags: nerdctl,}
# 
# - name: Post install tasks
#   gather_facts: false
#   hosts: CONTROLERS
#   tags: controler
#   become: true
#   vars_files: ../vars/main.yml
#   roles:
#   - {role: install_rke2_posttasks, tags: rke2,}