{
    "extends": ["config:base"],
    "labels": ["dependencies"],
    "packageRules": [
      {
        "matchPackagePatterns": ["rke2"],
        "labels": ["dependencies", "rke2"],
        "extractVersion": "^v(?<version>\\d+\\.\\d+.\\d+)"
      }
    ],
    "customManagers": [
      {
        "customType": "regex",
        "fileMatch": [
          "playbooks/vars/.*y[a]?ml$",
          "CHANGELOG.md",
          "README.md"
        ],
        "matchStrings": [
          "global_rke2_version: \"(?<currentValue>.*)\"\\n",
          "  - rke2 version: (?<currentValue>.*)\\n",
          "  - \\[RKE2 (?<currentValue>[^\\]]+)\\]\\(https://docs.rke2.io\\) - Security focused Kubernetes\\n"
        ],
        "depNameTemplate": "rke2",
        "versioningTemplate": "semver-coerced",
        "datasourceTemplate": "custom.rke2"
      }
    ],
    "customDatasources": {
      "rke2": {
        "defaultRegistryUrlTemplate": "https://update.rke2.io/v1-release/channels",
        "transformTemplates": [
          "{\"releases\":[{\"version\": $$.(data[id = 'stable'].latest),\"sourceUrl\":\"https://github.com/rancher/rke2\",\"changelogUrl\":$join([\"https://github.com/rancher/rke2/releases/tag/\",data[id = 'stable'].latest])}],\"sourceUrl\": \"https://github.com/rancher/rke2\",\"homepage\": \"https://docs.rke2.io\"}"
        ]
      }
    }
}
